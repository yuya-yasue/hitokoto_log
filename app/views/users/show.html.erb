<!-- app/views/users/show.html.erb -->

<h2 class="mb-4">プロフィール</h2>

<div class="card p-4 mb-4 shadow-sm">
  <div class="d-flex align-items-center">
    <% if @user.avatar.attached? %>
      <%= image_tag @user.avatar.variant(resize_to_limit: [80, 80]), class: "rounded-circle me-3", alt: "プロフィール画像" %>
    <% end %>
    <div>
      <h4><%= @user.nickname.presence || "（ニックネーム未設定）" %></h4>
      <p class="mb-0 text-muted"><%= @user.email %></p>
    </div>
  </div>
</div>

<h3 class="mb-3">投稿一覧</h3>

<% if @posts.any? %>
  <% @posts.each do |post| %>
    <div class="card mb-3 p-3 border rounded shadow-sm">
      <p><%= post.content %></p>
      <small class="text-muted"><%= time_ago_in_words(post.created_at) %>前</small>
    </div>
  <% end %>
<% else %>
  <p>まだ投稿がありません。</p>
<% end %>

<%= link_to "戻る", root_path, class: "btn btn-secondary mt-3" %>